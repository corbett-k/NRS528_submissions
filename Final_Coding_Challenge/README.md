# **NRS-528 Final Coding Challenge**
**Direct Georeferencing Toolbox:**

The three tools contained in [DirectGeoRef_Toolbox.tbx](https://github.com/corbett-k/NRS528_submissions/blob/main/Final_Coding_Challenge/DirectGeoRef_Toolbox.tbx) perform tasks initially developed in ArcGIS Pro ModelBuilder.

The toolset comprises steps to georeference and mosaic aerial images captured by a UAS (Unmanned Aircraft System; aka drone).

Georeferencing and mosaicking are essential steps for converting large image datasets generated by drone flights into a format suitable for visualization, interpretation, and analysis. This is typically done using commercially-available photogrammetry software. However, my MS thesis research focused on waterbird species in expansive aquatic environments presented unique challenges for processing imagery through a conventional approach.

To overcome this hurdle, geoprocessing tools within ArcGIS Pro were utilized through Python scripts incorporating functions of arcpy, the ArcGIS application programming interface for Python.

**- Tool #1: performs tasks associated with processing the metadata extracted from a set of drone images.**
  - A .csv table file containing the metadata is first converted to a point feature class (shapefile) using embedded GNSS coordinates (lat/longs).
  - This shapefile is then projected to a UTM coordinate system in order to generate XY coordinates (easting/northing) in units of meters.
  - The shapefile attribribute table is further modified by adding several fields, into which new values are populated from calculations using existing metadata.
  - Altitude and several camera parameters are used to calculate Ground Sampling Distance (GSD), to which image pixel size is equivalent.
  - Knowing pixel size and number of sensor pixels allows the XY UTM coordinates to be shifted from the center of the image to the upper left corner, a step that is necessary for steps in Tool #2.

**- Tool #2: provides georeferencing to images by creating world files populated with values generated in Tool #1.**
  - World Files are text files with a modified file extension (.jgw for .jpg images) and contain 6 lines of georeferencing instructions.
  - The X and Y pixel sizes (i.e., ground sampling distance) and X and Y coordinates of the upper left corner pixel (generated in Tool #1) provide 4 of the 6 lines of instructions.
  - The two remaining lines of world file georeferencing instructions, rotations about the x-axis and y-axis, are input as '0' values. After creating the world file and assoicating it with its corresponding image, rotation is performed using the 'Rotate' geoprocessing tool within ArcGIS Pro (Raster toolset / Projections and Transformations toolset / Management toolbox).
  - The georeferenced images are then copied to a geodatabase where they can be merged into a suitable format for display, manipulation, and analysis.

**- Tool #3: combines the set of georeferenced images into a mosaic dataset.**
  - An empty mosaic dataset must be created first, into which the rasters can be added.
  - Before adding the rasters, several properties of the mosaic dataset are defined according to the type of imagery used and how it should be displayed.
  - The rasters are then added to the mosaic dataset, generating the final intended product of these three tools.

Using the provided sample set of images (33 aerial drone photos captured over shoreline of Beavertail State Park in Jamestown, RI), the mosaic dataset output should resemble the map frame image presented below:

![mosaic_dataset_output](https://user-images.githubusercontent.com/98616257/168686688-50f6fec9-0485-43bc-bce5-e5b6feed4e29.jpg)
